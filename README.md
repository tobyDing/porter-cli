# porter-cli

åŸºäº git å®ç°è·¨é¡¹ç›®ä»£ç åŠŸèƒ½åŒæ­¥çš„ CI å·¥å…·

## é¡¹ç›®ä»‹ç»

porter-cli æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨ä¸åŒé¡¹ç›®ä¹‹é—´åŒæ­¥ä»£ç åŠŸèƒ½ã€‚å®ƒé€šè¿‡ Git æ¥è¿½è¸ªå’ŒåŒæ­¥ä»£ç å˜æ›´ï¼Œæ”¯æŒä»æºé¡¹ç›®é€‰æ‹©æ€§åœ°å°†ä»£ç å˜æ›´åŒæ­¥åˆ°å¤šä¸ªç›®æ ‡é¡¹ç›®ã€‚

å¦‚æœä½ æœ‰å¤šä¸ªé¡¹ç›®é¡¹ç›®æŠ€æœ¯æ ˆã€ç»„ç»‡ç»“æ„ç±»ä¼¼ï¼Œä½†æ˜¯ç”±äºä¸šåŠ¡éœ€æ±‚æˆ–è€…å…¶ä»–åŸå› å¯¼è‡´éœ€è¦ç‹¬ç«‹å¼€å‘ã€‚æœ‰æ—¶æŸä¸ªåŠŸèƒ½ç‚¹æ›´æ–°ï¼Œå¯èƒ½æŸå‡ ä¸ªé¡¹ç›®åŒæ—¶éœ€è¦æœ‰è¿™ä¸ªåŠŸèƒ½ç‚¹çš„ä»£ç å˜æ›´ã€‚porter-cli å¯ä»¥å¸®åŠ©ä½ å®ç°è¿™ä¸€éœ€æ±‚ï¼Œå°†æºé¡¹ç›®çš„ä»£ç å˜æ›´åŒæ­¥åˆ°å¤šä¸ªç›®æ ‡é¡¹ç›®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **è·¨é¡¹ç›®ä»£ç åŒæ­¥**ï¼šå°†ä¸€ä¸ªé¡¹ç›®çš„ä»£ç å˜æ›´åŒæ­¥åˆ°å¤šä¸ªç›®æ ‡é¡¹ç›®
- ğŸ”„ **åŸºäº Git è¿½è¸ªå˜æ›´**ï¼šåˆ©ç”¨ Git çš„å¼ºå¤§åŠŸèƒ½è¿½è¸ªä»£ç å˜æ›´
- ğŸ“‹ **æ”¯æŒå¤šä¸ªç›®æ ‡é¡¹ç›®**ï¼šä¸€æ¬¡é…ç½®ï¼ŒåŒæ­¥åˆ°å¤šä¸ªé¡¹ç›®
- âš™ï¸ **çµæ´»çš„é…ç½®é€‰é¡¹**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶ç²¾ç¡®æ§åˆ¶åŒæ­¥è¡Œä¸º
- ğŸ§  **æ™ºèƒ½æ£€æµ‹å†²çª**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶æç¤ºä»£ç å†²çª
- ğŸ“± **å‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢**ï¼šäº¤äº’å¼çš„å‘½ä»¤è¡Œä½“éªŒ

## å®‰è£…æ–¹æ³•

### å‰ææ¡ä»¶

- Node.js >= 22.18.0
- Git

### å…¨å±€å®‰è£…

```bash
npm install -g @tobyding/porter-cli
```

### æœ¬åœ°å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/tobyDing/porter-ci.git
cd @tobyding/porter-cli

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»ºé¡¹ç›®
pnpm run build

# ä½¿ç”¨é¡¹ç›®
node dist/index.js

# æ„å»ºé¡¹ç›®+ä½¿ç”¨é¡¹ç›®
pnpm run start
```

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ porter-cliï¼Œå®ƒä¼šæç¤ºä½ åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

```bash
porter-cli
```

æŒ‰ç…§æç¤ºæ“ä½œï¼Œporter-cli ä¼šåˆ›å»ºä¸€ä¸ª `porter-cli.config.json` æ–‡ä»¶ã€‚

### 2. é…ç½®æºé¡¹ç›®å’Œç›®æ ‡é¡¹ç›®

ç¼–è¾‘ `porter-cli.config.json` æ–‡ä»¶ï¼Œé…ç½®æºé¡¹ç›®å’Œç›®æ ‡é¡¹ç›®ä¿¡æ¯ï¼š

```json
{
  "projectName": "æºé¡¹ç›®åç§°",
  "projectPath": "æºé¡¹ç›®è·¯å¾„",
  "branch": "æºé¡¹ç›®åˆ†æ”¯",
  "commit-id": "æºé¡¹ç›®æŒ‡å®šåˆ†æ”¯çš„commit-idï¼ˆå¯é€‰ï¼‰",
  "targetProjects": [
    {
      "projectName": "ç›®æ ‡é¡¹ç›®åç§°",
      "projectPath": "ç›®æ ‡é¡¹ç›®è·¯å¾„",
      "branch": "ç›®æ ‡é¡¹ç›®åˆ†æ”¯"
    }
    // å¯ä»¥æ·»åŠ æ›´å¤šç›®æ ‡é¡¹ç›®
  ]
}
```

### 3. è¿è¡ŒåŒæ­¥

å†æ¬¡è¿è¡Œ porter-cliï¼Œå®ƒä¼šæ£€æŸ¥é…ç½®å¹¶æ‰§è¡ŒåŒæ­¥ï¼š

```bash
porter-cli
```

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ç»“æ„

| å­—æ®µ             | ç±»å‹        | è¯´æ˜                                            | æ˜¯å¦å¿…å¡« |
| ---------------- | ----------- | ----------------------------------------------- | -------- |
| `projectName`    | å­—ç¬¦ä¸²      | æºé¡¹ç›®çš„åç§°                                    | æ˜¯       |
| `projectPath`    | å­—ç¬¦ä¸²      | æºé¡¹ç›®çš„æœ¬åœ°è·¯å¾„                                | æ˜¯       |
| `branch`         | å­—ç¬¦ä¸²      | æºé¡¹ç›®çš„åˆ†æ”¯                                    | æ˜¯       |
| `commit-id`      | å­—ç¬¦ä¸²/æ•°ç»„ | æºé¡¹ç›®çš„ç‰¹å®šæäº¤ IDï¼ˆå¯é€‰ï¼Œä¸å¡«åˆ™åŒæ­¥æ‰€æœ‰æäº¤ï¼‰ | å¦       |
| `targetProjects` | æ•°ç»„        | ç›®æ ‡é¡¹ç›®åˆ—è¡¨                                    | æ˜¯       |

### ç›®æ ‡é¡¹ç›®é…ç½®

æ¯ä¸ªç›®æ ‡é¡¹ç›®åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µ          | ç±»å‹   | è¯´æ˜               | æ˜¯å¦å¿…å¡« |
| ------------- | ------ | ------------------ | -------- |
| `projectName` | å­—ç¬¦ä¸² | ç›®æ ‡é¡¹ç›®çš„åç§°     | æ˜¯       |
| `projectPath` | å­—ç¬¦ä¸² | ç›®æ ‡é¡¹ç›®çš„æœ¬åœ°è·¯å¾„ | æ˜¯       |
| `branch`      | å­—ç¬¦ä¸² | ç›®æ ‡é¡¹ç›®çš„åˆ†æ”¯     | æ˜¯       |

## å‘½ä»¤è¡Œé€‰é¡¹

```bash
porter-cli --version    # æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
porter-cli --help       # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
porter-cli             # è¿è¡Œä»£ç åŒæ­¥
```

## å·¥ä½œåŸç†

1. **æ£€æŸ¥é…ç½®**ï¼športer-cli é¦–å…ˆæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨å’Œæœ‰æ•ˆ
2. **éªŒè¯æºé¡¹ç›®**ï¼šæ£€æŸ¥æºé¡¹ç›®æ˜¯å¦å­˜åœ¨ï¼Œåˆ†æ”¯æ˜¯å¦æ­£ç¡®
3. **æ£€æŸ¥ç›®æ ‡é¡¹ç›®**ï¼šéªŒè¯æ‰€æœ‰ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨å’Œå¯è®¿é—®
4. **åˆ†æå˜æ›´**ï¼šåˆ†ææºé¡¹ç›®ä¸­çš„ä»£ç å˜æ›´
5. **æ‰§è¡ŒåŒæ­¥**ï¼šå°†å˜æ›´åŒæ­¥åˆ°æ‰€æœ‰ç›®æ ‡é¡¹ç›®
6. **æ¸…ç†èµ„æº**ï¼šæ¸…ç†ä¸´æ—¶èµ„æºå’Œè¿œç¨‹ä»“åº“

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**ï¼šTypeScript
- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js
- **æ„å»ºå·¥å…·**ï¼šVite
- **ä»£ç æ£€æŸ¥**ï¼šESLint + Prettier
- **Git æ“ä½œ**ï¼šNode.js Git API
- **å‘½ä»¤è¡Œæ¡†æ¶**ï¼šCommander.js
- **äº¤äº’å¼ç•Œé¢**ï¼šInquirer.js

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä¸€ä¸ªæ–°çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/your-feature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/your-feature`)
5. åˆ›å»ºä¸€ä¸ª Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è”ç³»æ–¹å¼

- ä½œè€…ï¼štobyDing
- é‚®ç®±ï¼štianchengding1314@163.com
- GitHubï¼š[https://github.com/tobyDing](https://github.com/tobyDing)
- é¡¹ç›®åœ°å€ï¼š[https://github.com/tobyDing/porter-ci](https://github.com/tobyDing/porter-ci)

## é—®é¢˜åé¦ˆ

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·åœ¨ GitHub Issues ä¸­æå‡ºï¼š
[https://github.com/tobyDing/porter-ci/issues](https://github.com/tobyDing/porter-ci/issues)

## LICENSE

[MIT](./LICENSE)
